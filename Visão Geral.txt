# ğŸš€ DOCUMENTO OFICIAL â€“ SISTEMA VIP ASSIST

### Norte completo para desenvolvimento

---

# 1. PROPÃ“SITO DO SISTEMA

Criar uma plataforma de AssistÃªncia 24h que permita:

 Receber chamados de assistÃªncia veicular.
 Distribuir chamados para prestadores via link (sem app).
 Rastrear prestadores em tempo real atravÃ©s do navegador.
 Permitir que o cliente acompanhe a chegada do prestador via link.
 Controlar operaÃ§Ã£o, SLA e pagamentos pela central.
 Integrar com Mapbox para mapas, rotas e ETA.

O objetivo Ã© ser leve, rÃ¡pido e totalmente web, evitando necessidade de app e reduzindo custo operacional.

---

# 2. PÃšBLICOS DO SISTEMA

1. Central / Atendentes

    Abertura de chamados
    AtribuiÃ§Ã£o de prestadores
    Acompanhamento

2. Gestor / Administrador

    Dashboards
    RelatÃ³rios
    ConfiguraÃ§Ãµes do sistema

3. Prestador (via link)

    Aceita o chamado
    Ativa rastreamento
    Envia status e finalizaÃ§Ã£o

4. Cliente (via link)

    Visualiza mapa com rastreamento
    ETA
    Dados do prestador

---

# 3. VISÃƒO GERAL DO MVP

O MVP deve entregar:

 Painel completo da central
 CriaÃ§Ã£o de chamados
 DistribuiÃ§Ã£o para prestadores
 Aceite via link
 Rastreamento via Mapbox (sem app)
 Link de acompanhamento para o cliente
 FinalizaÃ§Ã£o do atendimento
 Financeiro simples
 RelatÃ³rios bÃ¡sicos
 ConfiguraÃ§Ãµes gerais
 Controle de usuÃ¡rios

Tudo 100% web.

---

# 4. ARQUITETURA DO SISTEMA (NÃVEL ALTO)

## Front-end

 React
 Mapbox GL JS
 WebSockets para atualizaÃ§Ã£o instantÃ¢nea

## Back-end

 Node.js
 REST API
 WebSocket Server
 JWT/Auth bÃ¡sica
 ServiÃ§o de GPS Receiver (para prestadores)

## Banco de Dados

 MySQL

## ServiÃ§os externos

 Mapbox (mapas, rotas, direÃ§Ãµes, ETA)


# 5. FLUXO COMPLETO DA OPERAÃ‡ÃƒO

### 1. Chamado criado pela central

 Atendente coleta dados do cliente
 Local via GPS ou endereÃ§o
 Tipo da ocorrÃªncia
 ObservaÃ§Ãµes
 Sistema gera protocolo

---

### 2. SeleÃ§Ã£o do prestador

 Painel lista prestadores da regiÃ£o
 Atendente seleciona e ao clicar, direciona no whatsapp web para o atendente selecionar os prestadores para pedir cotaÃ§Ã£o.

---

### 3. Envio do link de aceite

Sistema gera:

```
https://seusistema.com/aceitar/{token_prestador}
```

Prestador recebe via WhatsApp.

---

### 4. Prestador aceita via navegador

Na tela:

 resumo do atendimento
 botÃ£o "ACEITAR"
 botÃ£o "RECUSAR"

Ao aceitar:

âœ” Chamado muda para â€œPrestador a caminhoâ€
âœ” Sistema pede permissÃ£o: â€œPermitir localizaÃ§Ã£o?â€
âœ” Rastreamento inicia

---

### 5. Link para o cliente acompanhar

Sistema gera:

```
https://seusistema.com/acompanhar/{token_cliente}
```

Cliente vÃª:

 mapa com prestador em tempo real
 ETA
 Nome do prestador (opcional)
 Contato da central

---

### 6. Rastreamento em tempo real

O navegador do prestador:

 envia localizaÃ§Ã£o a cada 10 segundos
 funciona com tela bloqueada usando:

   Background Sync
   Wake Lock API
   Service Worker

Central e cliente recebem as atualizaÃ§Ãµes via WebSocket e visualizam no mapa.

---

### 7. FinalizaÃ§Ã£o

Prestador, pelo link:

 Marca como concluÃ­do
 Adiciona fotos no local do destino com marcaÃ§Ã£o automatica de localizaÃ§Ã£o feita pelo sistema
 Coloca observaÃ§Ãµes

Central confirma.

---

### 8. Financeiro

Cada atendimento finalizado gera:

 valor fixo por tipo
 adicionais (KM extra)
 status pagamento: pendente / aprovado / pago
 exportaÃ§Ã£o Excel

---

# 6. MÃ“DULOS DO MVP

---

## ğŸ”µ 6.1. MÃ³dulo Chamados

FunÃ§Ãµes:

 Criar chamado
 Listar chamados
 Filtros
 Ver timeline
 Ver localizaÃ§Ã£o do prestador
 Reatribuir prestador
 Finalizar chamado
 Cancelar chamado

Campos principais:

 Cliente
 VeÃ­culo
 Tipo de ocorrÃªncia
 LocalizaÃ§Ã£o
 Prestador
 Status
 HistÃ³rico de eventos

---

## ğŸ”µ 6.2. MÃ³dulo Prestadores

FunÃ§Ãµes:

 Cadastro
 Ãrea de atendimento
 Tipos de serviÃ§os
 Status (online/offline)
 HistÃ³rico
 AvaliaÃ§Ãµes (futuro)

Subtelas:

 Lista
 Detalhes
 HistÃ³rico

---

## ğŸ”µ 6.3. MÃ³dulo Clientes

FunÃ§Ãµes:

 Cadastro
 Listagem
 Vincular veÃ­culo
 SituaÃ§Ã£o (ativo/inadimplente via API opcional)

---

## ğŸ”µ 6.4. MÃ³dulo Financeiro (Simples)

FunÃ§Ãµes:

 Tabela de preÃ§os
 Lista de atendimentos pendentes
 Aprovar pagamento
 Exportar CSV

---

## ğŸ”µ 6.5. MÃ³dulo RelatÃ³rios

Tipos:

 Operacional
 Financeiro
 Prestadores
 SLA

---

## ğŸ”µ 6.6. MÃ³dulo ConfiguraÃ§Ãµes

FunÃ§Ãµes:

 Dados da empresa
 Logo
 Cores
 SLA dos serviÃ§os
 Time de aceitaÃ§Ã£o do link
 Regras de distribuiÃ§Ã£o
 API keys Mapbox
 Templates de mensagens

---

## ğŸ”µ 6.7. MÃ³dulo UsuÃ¡rios e PermissÃµes

FunÃ§Ãµes:

 Criar usuÃ¡rio
 Definir funÃ§Ã£o (atendente, gestor, admin)
 PermissÃµes por menu
 Restringir aÃ§Ãµes

---

## ğŸ”µ 6.8. MÃ³dulo de Logs

Logs de:

 rastreamento
 envio de links
 alteraÃ§Ãµes de chamado
 acessos

---

# 7. MENU DO SISTEMA (OFICIAL)

ğŸ“Œ Dashboard
ğŸ“Œ Chamados
   â”œ Criar Chamado
   â”œ Lista de Chamados
   â”œ Mapa ao Vivo
ğŸ“Œ DistribuiÃ§Ã£o
ğŸ“Œ Prestadores
   â”œ Lista
   â”œ Cadastro
   â”œ Acompanhamento
ğŸ“Œ Clientes
   â”œ Lista
   â”œ Cadastro
ğŸ“Œ Financeiro
   â”œ Pagamentos
   â”œ Tabela de PreÃ§os
ğŸ“Œ RelatÃ³rios
ğŸ“Œ ConfiguraÃ§Ãµes
ğŸ“Œ UsuÃ¡rios & PermissÃµes
ğŸ“Œ Logs & Auditoria
```

---

# 8. BANCO DE DADOS (CONCEITUAL)

Sem estrutura tÃ©cnica, apenas entidades:

### Clientes

 nome
 CPF
 telefone
 e-mail

### VeÃ­culos

 placa
 modelo
 ano
 cliente_id

### Prestadores

 nome
 telefone
 tipo de serviÃ§o
 Ã¡rea de atendimento
 status

### Chamados

 cliente_id
 veÃ­culo_id
 tipo
 latitude
 longitude
 status
 prestador_id
 token_aceite
 token_rastreamento
 timestamps

### LocalizaÃ§Ãµes (rastreio)

 chamado_id
 prestador_id
 lat/lng
 timestamp

### Pagamentos

 prestador_id
 chamado_id
 valor
 status

### UsuÃ¡rios

 nome
 e-mail
 papel
 senha

### Logs

 aÃ§Ã£o
 usuÃ¡rio_id
 descriÃ§Ã£o
 data

---

# 9. REQUISITOS FUNCIONAIS

1. Sistema deve criar chamados com protocolo.
2. Deve gerar link Ãºnico para prestador aceitar.
3. Prestador deve aceitar sem app.
4. Deve rastrear prestador em tempo real via navegador.
5. Deve funcionar com o celular bloqueado (wake lock + background sync).
6. Cliente deve acompanhar via link pÃºblico.
7. Atendente deve visualizar mapa ao vivo.
8. Atendente deve gerenciar SLA.
9. Sistema deve permitir finalizaÃ§Ã£o.
10. Prestador deve inserir infos bÃ¡sicas ao finalizar.
11. Financeiro deve gerar pendÃªncias e valores.

---

# 10. REQUISITOS TÃ‰CNICOS

 Uso do Mapbox GL JS para mapas 3D.
 Uso do Mapbox Directions API para rotas e ETA.
 Uso do Mapbox Matrix API para escolher prestador mais prÃ³ximo.
 Uso de WebSockets para atualizaÃ§Ã£o de mapa.
 Uso de Service Worker + Background Sync no navegador do prestador.
 Tokens Ãºnicos para seguranÃ§a dos links.
 Backend com autenticaÃ§Ã£o JWT para painel.
 Logs de auditoria obrigatÃ³rios.

---

# 11. REGRAS DE NEGÃ“CIO IMPORTANTES

1. Chamado sÃ³ pode ser aceito por 1 prestador por vez.
2. Tempo para prestador aceitar Ã© configurÃ¡vel (ex: 2 minutos).
3. Se prestador nÃ£o aceitar â†’ sistema libera para outro.
4. Prestador deve enviar posiÃ§Ã£o automaticamente atÃ© finalizar.
5. Chamado nÃ£o pode ser finalizado sem localizaÃ§Ã£o mÃ­nima registrada.
6. Cliente sÃ³ vÃª rastreamento, nunca detalhes internos.

---

# 12. ENTREGA FINAL DO MVP

O sistema Ã© considerado entregue quando:

 Chamado abre
 Prestador aceita via link
 Cliente acompanha via link
 Mapa mostra prestador em tempo real
 FinalizaÃ§Ã£o registrada
 Painel operacional funcionando
 Financeiro funcionando
 Logs funcionando
 ConfiguraÃ§Ãµes funcionando
 Mapbox integrado totalmente


